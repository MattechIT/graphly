<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="res/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Load bootstrap ES modules -->
    <script type="module" src="js/index.js"></script>
    <title>Graphly - Algorithm Visualizer</title>
</head>
<body>
    <!-- Toolbar -->
    <nav id="toolbar" role="navigation" aria-label="Toolbar">
        <img id="logo" src="res/logo.png" alt="Graph Logo" />
        <div class="toolbar-group">
            <button id="btn-add-node" class="btn-edit" type="button">Add Node</button>
            <button id="btn-add-edge" class="btn-edit" type="button">Add Edge</button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group">
            <button id="btn-save" class="btn-icon-text" title="Save Graph JSON">
                <span class="material-symbols-outlined">save</span>
                Save
            </button>
            <button id="btn-load" class="btn-icon-text" title="Load Graph JSON">
                <span class="material-symbols-outlined">upload_file</span>
                Load
            </button>
            <input type="file" id="input-load-file" accept=".json" style="display: none;">
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group" id="algorithm-container">
            <!-- Buttons will be injected dynamically -->
        </div>
        <span id="info" role="status" aria-live="polite">Current Mode: Move</span>
    </nav>
    
    <!-- Graph container -->
    <main id="main" role="main">
        <button id="btn-open-sidebar" class="hidden" title="Open Log">ðŸ“œ Log</button>
        <aside id="log-sidebar" class="hidden">
            <div class="sidebar-header">
                <h3>Algorithm Log</h3>
                <button id="btn-close-sidebar">&times;</button>
            </div>
            <ul id="log-list">
                <!-- Log entries will be added here -->
            </ul>
        </aside>

        <div id="graph-container">
            <svg id="svg-canvas">
                <defs>
                    <marker id="arrowhead" markerWidth="12" markerHeight="12" 
                    refX="10" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
                    </marker>
                    
                    <marker id="arrowhead-drag" markerWidth="12" markerHeight="12" 
                    refX="10" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#95a5a6" />
                    </marker>
                </defs>

                <g id="edges-layer"></g>
                <g id="nodes-layer"></g>
                <g id="drag-layer"></g>
            </svg>

            <!-- Floating panel -->
            <div id="floating-panel" role="dialog" aria-hidden="true" aria-label="Element Settings">
                <!-- Content injected dynamically by ui.js -->
            </div>

            <!-- Player Bar -->
            <div id="player-bar" class="hidden">
                <div class="player-controls">
                    <button id="player-start" class="btn-icon" title="Restart">
                        <span class="material-symbols-outlined">skip_previous</span>
                    </button>
                    <button id="player-back" class="btn-icon" title="Back">
                        <span class="material-symbols-outlined">navigate_before</span>
                    </button>
                    <button id="player-play" class="btn-icon circle-btn" title="Play/Pause">
                        <span class="material-symbols-outlined">play_arrow</span>
                    </button>
                    <button id="player-next" class="btn-icon" title="Next">
                        <span class="material-symbols-outlined">navigate_next</span>
                    </button>
                    <button id="player-end" class="btn-icon" title="Go to End">
                        <span class="material-symbols-outlined">skip_next</span>
                    </button>
                    <div class="divider"></div>
                    <button id="player-stop" class="btn-icon" title="Stop">
                        <span class="material-symbols-outlined">stop</span>
                    </button>
                </div>
                <div class="player-info">
                    <span id="player-step-info">Step: 0/0</span>
                </div>
            </div>
        </div>
    </main>
</body>
</html>