<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/x-icon" href="res/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Load bootstrap ES modules -->
    <script type="module" src="js/index.js"></script>
    <title>Graphly - Algorithm Visualizer</title>
</head>
<body>
    <!-- Orientation Alert for Mobile -->
    <div id="orientation-overlay">
        <span class="material-symbols-outlined">screen_rotation</span>
        <h3>Please Rotate Your Device</h3>
        <p>Graphly requires landscape mode to provide the best experience.</p>
    </div>

    <!-- Toolbar -->
    <nav id="toolbar" role="navigation" aria-label="Toolbar">
        <img id="logo" src="res/logo.png" alt="Graph Logo" />
        <div class="toolbar-group">
            <button id="btn-add-node" class="btn-edit btn-icon-text" type="button">
                <span class="material-symbols-outlined">add_circle</span>
                <span class="btn-text">Add Node</span>
            </button>
            <button id="btn-add-edge" class="btn-edit btn-icon-text" type="button">
                <span class="material-symbols-outlined">mediation</span>
                <span class="btn-text">Add Edge</span>
            </button>
        </div>
        <span id="info" role="status" aria-live="polite">Current Mode: Move</span>
        <div class="toolbar-right">
            <div class="toolbar-group">
                <div class="dropdown">
                    <button id="btn-layout-menu" class="btn-icon-text" title="Change Graph Layout">
                        <span class="material-symbols-outlined">grid_view</span>
                        <span class="btn-text">Layout</span>
                        <span class="material-symbols-outlined dropdown-arrow">arrow_drop_down</span>
                    </button>
                    <div id="layout-dropdown" class="dropdown-content">
                        <button id="btn-layout-compact" class="btn-dropdown-item">
                            <span class="material-symbols-outlined">view_stream</span>
                            <span class="btn-text">Compact</span>
                        </button>
                        <button id="btn-layout-layered" class="btn-dropdown-item">
                            <span class="material-symbols-outlined">reorder</span>
                            <span class="btn-text">Layered</span>
                        </button>
                        <button id="btn-layout-circle" class="btn-dropdown-item">
                            <span class="material-symbols-outlined">progress_activity</span>
                            <span class="btn-text">Circle</span>
                        </button>
                        <button id="btn-layout-grid" class="btn-dropdown-item">
                            <span class="material-symbols-outlined">grid_view</span>
                            <span class="btn-text">Grid</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="toolbar-group">
                <div class="dropdown">
                    <button id="btn-algo-menu" class="btn-icon-text" title="Run Algorithm">
                        <span class="material-symbols-outlined">analytics</span>
                        <span class="btn-text">Algorithms</span>
                        <span class="material-symbols-outlined dropdown-arrow">arrow_drop_down</span>
                    </button>
                    <div id="algorithm-container" class="dropdown-content">
                        <!-- Buttons will be injected dynamically -->
                    </div>
                </div>
            </div>
            <div class="toolbar-group">
                <button id="btn-save" class="btn-icon-text" title="Save Graph JSON">
                    <span class="material-symbols-outlined">save</span>
                    <span class="btn-text">Save</span>
                </button>
                <button id="btn-load" class="btn-icon-text" title="Load Graph JSON">
                    <span class="material-symbols-outlined">upload_file</span>
                    <span class="btn-text">Load</span>
                </button>
                <input type="file" id="input-load-file" accept=".json" style="display: none;">
            </div>
        </div>
    </nav>

    <!-- Main Workspace -->
    <main id="main" role="main">
        <div id="upper-workspace">
            <div id="graph-container">
                <button id="btn-open-sidebar" class="hidden" title="Open Log">
                    <span class="material-symbols-outlined">list_alt</span>
                    Show step-by-step
                </button>
                <svg id="svg-canvas">
                    <defs>
                        <marker id="arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
                        </marker>
                        <marker id="arrowhead-drag" markerWidth="12" markerHeight="12" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#95a5a6" />
                        </marker>
                    </defs>
                    <g id="edges-layer"></g>
                    <g id="nodes-layer"></g>
                    <g id="drag-layer"></g>
                </svg>
                <!-- Floating panel -->
                <div id="floating-panel" role="dialog" aria-hidden="true" aria-label="Element Settings">
                    <!-- Content injected dynamically by ui.js -->
                </div>
            </div>

            <aside id="log-sidebar" class="hidden">
                <div class="sidebar-header">
                    <h3>Step-By-Step</h3>
                    <button id="btn-close-sidebar">&times;</button>
                </div>
                <ul id="log-list">
                    <!-- Log entries will be added here -->
                </ul>
            </aside>
        </div>

        <!-- Player Bar (Full Width Bottom) -->
        <div id="player-bar" class="hidden">
            <div class="player-info">
                <span id="player-step-info">Step: 0/0</span>
            </div>
            <div class="player-controls">
                <button id="player-start" class="btn-icon" title="Restart">
                    <span class="material-symbols-outlined">skip_previous</span>
                </button>
                <button id="player-back" class="btn-icon" title="Back">
                    <span class="material-symbols-outlined">navigate_before</span>
                </button>
                <button id="player-play" class="btn-icon circle-btn" title="Play/Pause">
                    <span class="material-symbols-outlined">play_arrow</span>
                </button>
                <button id="player-next" class="btn-icon" title="Next">
                    <span class="material-symbols-outlined">navigate_next</span>
                </button>
                <button id="player-end" class="btn-icon" title="Go to End">
                    <span class="material-symbols-outlined">skip_next</span>
                </button>
            </div>
            <div class="player-stop-container">
                <button id="player-stop" class="btn-icon" title="Stop">
                    <span class="material-symbols-outlined">stop</span>
                </button>
            </div>
        </div>
    </main>
</body>
</html>